<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Br√∂tchen-Bestellung</title>
  <style>
    body {
      background-color: #DFDCD7;
      font-family: sans-serif;
      color: #292826;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 600px;
      margin: auto;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      font-size: 1.8rem;
    }
    h2 {
      font-size: 1.3rem;
      margin-top: 2rem;
    }
    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: bold;
    }
    input, select, button {
      width: 100%;
      padding: 0.6rem;
      margin-bottom: 1rem;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 1rem;
    }
    .hidden { display: none; }
    .step {
      display: none;
      transition: all 0.3s ease;
    }
    .step.active {
      display: block;
    }
    .btn {
      background-color: #292826;
      color: white;
      border: none;
      cursor: pointer;
    }
    .btn-row {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
    }
    .delivery-day {
      border: 1px solid #ccc;
      padding: 1rem;
      border-radius: 10px;
      margin-bottom: 1rem;
      background: white;
    }
    .item-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }
    .quantity-control {
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }
    .quantity-control button {
      width: 2rem;
      height: 2rem;
      font-size: 1rem;
      border: none;
      background: #292826;
      color: white;
      border-radius: 50%;
      cursor: pointer;
    }
    .delete-btn {
      background: none;
      border: none;
      color: #a00;
      font-size: 1.2rem;
      cursor: pointer;
    }
    #total {
      font-weight: bold;
      text-align: center;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Br√∂tchen-Bestellung</h1>
    <p style="text-align:center">Bestellen Sie frische Br√∂tchen f√ºr Ihre Ferienwohnung</p>

    <div id="step1" class="step active">
      <label for="name">Name *</label>
      <input type="text" id="name" required>

      <label for="email">Email *</label>
      <input type="email" id="email" required>

      <label for="wohnung">Ferienwohnung *</label>
      <select id="wohnung" required>
        <option value="">W√§hlen Sie Ihre Ferienwohnung</option>
        <option value="La Maison">La Maison</option>
        <option value="Suite Maritim">Suite Maritim</option>
        <option value="Maisonette Beach">Maisonette Beach</option>
      </select>

      <button class="btn" onclick="nextStep()">N√§chste Seite</button>
    </div>

    <div id="step2" class="step">
      <div id="lieferTage"></div>

      <button class="btn" onclick="addLieferTag()">+ Weiteren Liefertag hinzuf√ºgen</button>

      <p id="total">Gesamtpreis: 0,00‚Ç¨</p>

      <div class="btn-row">
        <button class="btn" onclick="prevStep()">Zur√ºck</button>
        <button class="btn" onclick="submitOrder()">Bestellung absenden</button>
      </div>
    </div>
  </div>

  <script>
    const broetchenPreise = {
      "M√ºslibr√∂tchen": 1.50,
      "Roggenkr√ºsti": 0.99,
      "Fitnessbr√∂tchen": 1.15,
      "K√ºrbiskernbr√∂tchen": 1.20,
      "Dinkelbr√∂tchen": 1.20,
      "Schnittbr√∂tchen": 0.60,
      "Kraftk√∂rnchen": 1.15,
      "Mohnbr√∂tchen": 0.85,
      "Sesambr√∂tchen": 0.85,
      "Morgengoldbr√∂tchen": 0.95,
      "Kartoffelbr√∂tchen": 1.05,
      "K√ºrbisk√§sebr√∂tchen": 1.60,
      "K√§sebr√∂tchen": 1.55,
      "Milchbr√∂tchen": 1.00,
      "Rosinenbr√∂tchen": 1.10,
      "Buttercroissant": 1.85,
      "Croissant": 1.85,
      "Schokoladencroissant": 2.10,
      "Laugenstange": 1.60,
      "Laugenbr√∂tchen": 1.20,
      "Rosinenschnecke": 2.45,
      "Donut": 1.85,
      "Berliner": 1.80,
      "Mandelh√∂rnchen": 2.80,
      "gro√ües Kassler": 4.55,
      "Kraftkornbrot": 4.85,
      "M√ºnsterl√§nder": 4.50,
      "Fitnessbrot": 4.85,
      "Dinkelbrot": 4.55,
      "Steinofenbrot": 4.55,
      "Holzhacker": 4.85,
      "Hamburger Brot": 3.70,
      "Pottstuten": 4.50
    };

    function nextStep() {
      document.getElementById('step1').classList.remove('active');
      document.getElementById('step2').classList.add('active');
      if (!document.querySelector('.delivery-day')) addLieferTag();
    }

    function prevStep() {
      document.getElementById('step2').classList.remove('active');
      document.getElementById('step1').classList.add('active');
    }

    function addLieferTag() {
      const container = document.createElement('div');
      container.className = 'delivery-day';

      const dateInput = document.createElement('input');
      dateInput.type = 'date';
      dateInput.required = true;
      container.appendChild(dateInput);

      const itemList = document.createElement('div');
      container.appendChild(itemList);

      function addItem() {
        const row = document.createElement('div');
        row.className = 'item-row';

        const select = document.createElement('select');
        for (let broetchen in broetchenPreise) {
          const option = document.createElement('option');
          option.value = broetchen;
          option.text = `${broetchen} (${broetchenPreise[broetchen].toFixed(2)}‚Ç¨)`;
          select.appendChild(option);
        }
        row.appendChild(select);

        const quantity = document.createElement('input');
        quantity.type = 'number';
        quantity.min = 1;
        quantity.value = 1;
        quantity.style.width = '4rem';
        row.appendChild(quantity);

        const delBtn = document.createElement('button');
        delBtn.className = 'delete-btn';
        delBtn.innerText = 'üóëÔ∏è';
        delBtn.onclick = () => {
          row.remove();
          calcTotal();
        };
        row.appendChild(delBtn);

        select.onchange = calcTotal;
        quantity.oninput = calcTotal;

        itemList.appendChild(row);
        calcTotal();
      }

      const addBtn = document.createElement('button');
      addBtn.className = 'btn';
      addBtn.textContent = '+ Br√∂tchensorte hinzuf√ºgen';
      addBtn.onclick = (e) => {
        e.preventDefault();
        addItem();
      };
      container.appendChild(addBtn);

      const delDay = document.createElement('button');
      delDay.className = 'delete-btn';
      delDay.innerText = 'üóëÔ∏è';
      delDay.onclick = () => {
        container.remove();
        calcTotal();
      };
      container.appendChild(delDay);

      document.getElementById('lieferTage').appendChild(container);

      dateInput.onchange = () => {
        const selected = new Date(dateInput.value);
        const weekend = [0, 6].includes(selected.getDay());
        const selects = container.querySelectorAll('select');
        selects.forEach(s => {
          if (s.value === 'M√ºslibr√∂tchen') s.value = '';
          s.querySelectorAll('option').forEach(opt => {
            if (opt.value === 'M√ºslibr√∂tchen') opt.disabled = weekend;
          });
        });
        calcTotal();
      };

      addItem();
    }

    function calcTotal() {
      let sum = 0;
      const days = document.querySelectorAll('.delivery-day');
      days.forEach(day => {
        const date = new Date(day.querySelector('input[type="date"]').value);
        const weekend = [0, 6].includes(date.getDay());
        const items = day.querySelectorAll('.item-row');
        let tagSum = 0;
        items.forEach(item => {
          const sorte = item.querySelector('select').value;
          const menge = parseInt(item.querySelector('input').value);
          if (broetchenPreise[sorte]) tagSum += broetchenPreise[sorte] * menge;
        });
        if (weekend) tagSum += 1.70;
        sum += tagSum;
      });
      document.getElementById('total').innerText = `Gesamtpreis: ${sum.toFixed(2)}‚Ç¨`;
    }

    function submitOrder() {
      alert("Diese Funktion wird noch angebunden. Deine Daten bleiben lokal gespeichert.");
    }
  </script>
</body>
</html>
